<%= render :super %>

<div style="float: right;">
	<% form_for :update_profile, :url => { :action => :update_profile } do |f| %>
		<%= text_field_tag :profile_array, '', :style => 'display: none;'%>
		<input type='submit' value='Actualizar' onclick="setArray();"></input>
	<% end %>
</div>

<script type="text/javascript">
	function getElementsByClass(searchClass,node,tag) {
		var classElements = new Array();
		if ( node == null )
			node = document;
		if ( tag == null )
			tag = '*';
		var els = node.getElementsByTagName(tag);
		var elsLen = els.length;
		var pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
		for (i = 0, j = 0; i < elsLen; i++) {
			if ( pattern.test(els[i].className) ) {
				classElements[j] = els[i];
				j++;
			}
		}
			return classElements;
			
	}
	function setArray(){
		var elements = getElementsByClass('profiles');
		var string = "";
		
		for (i=0;i<=elements.size()-1;i++) {
			string = '-'+elements[i].name+','+elements[i].value;
		}
		
		$(document).getElementById('profile_array').value = string;
	}
</script>
